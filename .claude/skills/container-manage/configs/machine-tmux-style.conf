# Machine-level Tmux Style Configuration
# 物理机层面的 tmux 会话样式配置
# 用于 machine-desktop-view 和 machine-mobile-view

# ============================================
# 基础设置
# ============================================
set -g default-terminal "screen-256color"
set -g history-limit 50000
set -g mouse on

# 窗口和面板索引从 1 开始（但我们的窗口从 0 开始以匹配 VM）
set -g base-index 0
setw -g pane-base-index 1

# ============================================
# 状态栏配置
# ============================================
set -g status on
set -g status-interval 5
set -g status-position bottom
set -g status-justify left

# 状态栏颜色 - 蓝色系（区别于 VM 的橙黄色系）
# 使用深蓝背景 + 青色文字
set -g status-style bg=colour234,fg=colour33

# ============================================
# 左侧状态栏
# ============================================
# 显示机器标识和会话名称
set -g status-left-length 50
set -g status-left '#[fg=colour39,bold]🖥️  Machine #[fg=colour33]| #[fg=colour117]#S #[fg=colour33]| '

# ============================================
# 右侧状态栏
# ============================================
# 显示 VM 数量、当前窗口信息和时间
set -g status-right-length 80
set -g status-right '#[fg=colour33]VM:#[fg=colour117,bold]#{session_windows} #[fg=colour33]| #[fg=colour39]#{window_index}:#{window_name} #[fg=colour33]| #[fg=colour75]%Y-%m-%d #[fg=colour117,bold]%H:%M'

# ============================================
# 窗口状态样式
# ============================================
# 非活动窗口 - 灰蓝色
setw -g window-status-format '#[fg=colour61] #I:#W '

# 当前窗口 - 亮蓝色加粗 + 勾号
setw -g window-status-current-format '#[fg=colour39,bold] #I:#W #[fg=colour33]✓'

# 窗口活动通知 - 青色
setw -g window-status-activity-style fg=colour51,bg=colour234

# ============================================
# 面板边框
# ============================================
# 非活动面板 - 深灰
set -g pane-border-style fg=colour238

# 活动面板 - 蓝色
set -g pane-active-border-style fg=colour33

# ============================================
# 消息样式
# ============================================
set -g message-style fg=colour232,bg=colour39,bold

# ============================================
# 时钟模式
# ============================================
setw -g clock-mode-colour colour39

# ============================================
# 快捷键绑定
# ============================================
# Ctrl+Y/U 快速切换窗口
bind-key -n C-y previous-window
bind-key -n C-u next-window

# Alt+数字 直接跳转窗口
bind-key -n M-0 select-window -t 0
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4

# Ctrl+j/k 滚动（类似鼠标滚轮）
bind-key -n C-k copy-mode \; send-keys -X -N 5 scroll-up
bind-key -T copy-mode-vi C-k send-keys -X -N 5 scroll-up
bind-key -T copy-mode C-k send-keys -X -N 5 scroll-up

bind-key -T copy-mode-vi C-j send-keys -X -N 5 scroll-down \; if-shell -F "#{==:#{scroll_position},0}" "send-keys -X cancel" ""
bind-key -T copy-mode C-j send-keys -X -N 5 scroll-down \; if-shell -F "#{==:#{scroll_position},0}" "send-keys -X cancel" ""

# ============================================
# 颜色参考
# ============================================
# colour234 - 非常深的灰色（背景）
# colour238 - 深灰色（边框）
# colour33  - 中等蓝色（主色调）
# colour39  - 亮蓝色（强调色）
# colour61  - 灰蓝色（非活动窗口）
# colour75  - 天蓝色（日期）
# colour117 - 浅蓝色（会话名、窗口数）
# colour51  - 青色（活动通知）

# ============================================
# 设计理念
# ============================================
# 1. 使用蓝色系区别于 VM 的橙黄色系
# 2. 左侧显示机器标识和会话名称
# 3. 右侧显示 VM 数量、窗口信息和时间
# 4. 保持与 VM 样式相似的结构，便于识别
