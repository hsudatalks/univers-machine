# Machine-level Tmux Style Configuration
# ç‰©ç†æœºå±‚é¢çš„ tmux ä¼šè¯æ ·å¼é…ç½®
# ç”¨äº machine-desktop-view å’Œ machine-mobile-view

# ============================================
# åŸºç¡€è®¾ç½®
# ============================================
set -g default-terminal "screen-256color"
set -g history-limit 50000
set -g mouse on

# çª—å£å’Œé¢æ¿ç´¢å¼•ä» 1 å¼€å§‹ï¼ˆä½†æˆ‘ä»¬çš„çª—å£ä» 0 å¼€å§‹ä»¥åŒ¹é… VMï¼‰
set -g base-index 0
setw -g pane-base-index 1

# ============================================
# çŠ¶æ€æ é…ç½®
# ============================================
set -g status on
set -g status-interval 5
set -g status-position bottom
set -g status-justify left

# çŠ¶æ€æ é¢œè‰² - è“è‰²ç³»ï¼ˆåŒºåˆ«äº VM çš„æ©™é»„è‰²ç³»ï¼‰
# ä½¿ç”¨æ·±è“èƒŒæ™¯ + é’è‰²æ–‡å­—
set -g status-style bg=colour234,fg=colour33

# ============================================
# å·¦ä¾§çŠ¶æ€æ 
# ============================================
# æ˜¾ç¤ºæœºå™¨æ ‡è¯†å’Œä¼šè¯åç§°
set -g status-left-length 50
set -g status-left '#[fg=colour39,bold]ğŸ–¥ï¸  Machine #[fg=colour33]| #[fg=colour117]#S #[fg=colour33]| '

# ============================================
# å³ä¾§çŠ¶æ€æ 
# ============================================
# æ˜¾ç¤º VM æ•°é‡ã€å½“å‰çª—å£ä¿¡æ¯å’Œæ—¶é—´
set -g status-right-length 80
set -g status-right '#[fg=colour33]VM:#[fg=colour117,bold]#{session_windows} #[fg=colour33]| #[fg=colour39]#{window_index}:#{window_name} #[fg=colour33]| #[fg=colour75]%Y-%m-%d #[fg=colour117,bold]%H:%M'

# ============================================
# çª—å£çŠ¶æ€æ ·å¼
# ============================================
# éæ´»åŠ¨çª—å£ - ç°è“è‰²
setw -g window-status-format '#[fg=colour61] #I:#W '

# å½“å‰çª—å£ - äº®è“è‰²åŠ ç²— + å‹¾å·
setw -g window-status-current-format '#[fg=colour39,bold] #I:#W #[fg=colour33]âœ“'

# çª—å£æ´»åŠ¨é€šçŸ¥ - é’è‰²
setw -g window-status-activity-style fg=colour51,bg=colour234

# ============================================
# é¢æ¿è¾¹æ¡†
# ============================================
# éæ´»åŠ¨é¢æ¿ - æ·±ç°
set -g pane-border-style fg=colour238

# æ´»åŠ¨é¢æ¿ - è“è‰²
set -g pane-active-border-style fg=colour33

# ============================================
# æ¶ˆæ¯æ ·å¼
# ============================================
set -g message-style fg=colour232,bg=colour39,bold

# ============================================
# æ—¶é’Ÿæ¨¡å¼
# ============================================
setw -g clock-mode-colour colour39

# ============================================
# å¿«æ·é”®ç»‘å®š
# ============================================
# Ctrl+Y/U å¿«é€Ÿåˆ‡æ¢çª—å£
bind-key -n C-y previous-window
bind-key -n C-u next-window

# Alt+æ•°å­— ç›´æ¥è·³è½¬çª—å£
bind-key -n M-0 select-window -t 0
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4

# Ctrl+j/k æ»šåŠ¨ï¼ˆç±»ä¼¼é¼ æ ‡æ»šè½®ï¼‰
bind-key -n C-k copy-mode \; send-keys -X -N 5 scroll-up
bind-key -T copy-mode-vi C-k send-keys -X -N 5 scroll-up
bind-key -T copy-mode C-k send-keys -X -N 5 scroll-up

bind-key -T copy-mode-vi C-j send-keys -X -N 5 scroll-down \; if-shell -F "#{==:#{scroll_position},0}" "send-keys -X cancel" ""
bind-key -T copy-mode C-j send-keys -X -N 5 scroll-down \; if-shell -F "#{==:#{scroll_position},0}" "send-keys -X cancel" ""

# ============================================
# é¢œè‰²å‚è€ƒ
# ============================================
# colour234 - éå¸¸æ·±çš„ç°è‰²ï¼ˆèƒŒæ™¯ï¼‰
# colour238 - æ·±ç°è‰²ï¼ˆè¾¹æ¡†ï¼‰
# colour33  - ä¸­ç­‰è“è‰²ï¼ˆä¸»è‰²è°ƒï¼‰
# colour39  - äº®è“è‰²ï¼ˆå¼ºè°ƒè‰²ï¼‰
# colour61  - ç°è“è‰²ï¼ˆéæ´»åŠ¨çª—å£ï¼‰
# colour75  - å¤©è“è‰²ï¼ˆæ—¥æœŸï¼‰
# colour117 - æµ…è“è‰²ï¼ˆä¼šè¯åã€çª—å£æ•°ï¼‰
# colour51  - é’è‰²ï¼ˆæ´»åŠ¨é€šçŸ¥ï¼‰

# ============================================
# è®¾è®¡ç†å¿µ
# ============================================
# 1. ä½¿ç”¨è“è‰²ç³»åŒºåˆ«äº VM çš„æ©™é»„è‰²ç³»
# 2. å·¦ä¾§æ˜¾ç¤ºæœºå™¨æ ‡è¯†å’Œä¼šè¯åç§°
# 3. å³ä¾§æ˜¾ç¤º VM æ•°é‡ã€çª—å£ä¿¡æ¯å’Œæ—¶é—´
# 4. ä¿æŒä¸ VM æ ·å¼ç›¸ä¼¼çš„ç»“æ„ï¼Œä¾¿äºè¯†åˆ«
